<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Inicio de sesión</title>
  <link rel="stylesheet" href="css/styles.css"/>
  <link href="https://fonts.googleapis.com/css?family=Kaushan+Script" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Kaushan+Script|Neucha" rel="stylesheet">
</head>
<body>
  <div class="loginContainer">
    <div class="loginTitle">Inicio de Sesión</div>
    <form id="loginForm" method="post">
      <div class="fields-Container">
        <input type="text" id="user" placeholder="Usuario..." />
        <input type="password" id="pass" placeholder="Contraseña..." />
        <button id="login" class="loginButton">Ingresar</button>
      </div>
    </form>
  </div>
  <script src="js/vendor/jquery.js"></script>
  <script>
  // var nombreUsuario = $('#user')
  // var pass = $('#pass')
  // $('.loginButton').on('click', function(event) {
  //     if (nombreUsuario.val() != "" && pass.val() != "") {
  //         $.post('/login',{user: nombreUsuario.val(), pass: pass.val()}, function(response) {
  //             if (response == "Validado") {
  //                 window.location.href = "http://localhost:3000/main.html"
  //             }
  //         })
  //     } else {
  //         alert("Complete todos los campos")
  //     }
  // })
  $(function(){
    var l = new Login();
  });


  class Login {
    constructor() {
      this.submitEvent();
    }

    submitEvent(){
      $('#loginForm').submit((event) => {
        event.preventDefault();
        if (this.validateForm()) {
          this.sendForm();
        }
      });
    }

    sendForm(){
      $.post('/login',{user: $('#user').val(), pass: $('#pass').val()}, function(response) {
        if (response == "OK") {
          window.location.href = 'main.html';
        } else {
          alert(response);
        }
      })
    }

    validateForm() {
      if ($('#user').val() != '' && $('#pass').val() != '') {
        return true;
      } else {
        return false;
      }
    }
  }

  </script>
</body>
</html>
